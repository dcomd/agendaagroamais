{"ast":null,"code":"/**\n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar getDropRowIndex = function getDropRowIndex(_ref) {\n  var rowHeightManager = _ref.rowHeightManager,\n    dragBoxInitialRegion = _ref.dragBoxInitialRegion,\n    dragBoxOffsets = _ref.dragBoxOffsets,\n    initialDiffTop = _ref.initialDiffTop,\n    scrollTop = _ref.scrollTop,\n    dragIndex = _ref.dragIndex,\n    dir = _ref.dir;\n  var rowOffset = dragBoxInitialRegion.top - dragBoxOffsets.top + initialDiffTop + scrollTop;\n  var currentIndex = rowHeightManager.getRowAt(rowOffset);\n  if (currentIndex < 0) {\n    return {\n      index: -1\n    };\n  }\n  var nextRowIndex = currentIndex + dir;\n  var nextRowHeight = rowHeightManager.getRowHeight(nextRowIndex);\n  var nextRowOffset = rowHeightManager.getRowOffset(nextRowIndex);\n  var halfSize = nextRowHeight / 2;\n  if (nextRowOffset < 0) {\n    nextRowOffset = 0;\n  }\n  var newDropIndex = -1;\n  if (dir > 0) {\n    if (rowOffset >= nextRowOffset - halfSize) {\n      newDropIndex = nextRowIndex;\n    }\n  }\n  if (dir < 0) {\n    if (rowOffset > nextRowOffset + halfSize + nextRowHeight) {\n      newDropIndex = currentIndex === dragIndex ? dragIndex : currentIndex + 1;\n    } else {\n      newDropIndex = currentIndex;\n    }\n  }\n  if (newDropIndex === -1) {\n    newDropIndex = currentIndex;\n  }\n  return {\n    index: newDropIndex\n  };\n};\nvar _default = getDropRowIndex;\nexports.default = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","getDropRowIndex","_ref","rowHeightManager","dragBoxInitialRegion","dragBoxOffsets","initialDiffTop","scrollTop","dragIndex","dir","rowOffset","top","currentIndex","getRowAt","index","nextRowIndex","nextRowHeight","getRowHeight","nextRowOffset","getRowOffset","halfSize","newDropIndex","_default"],"sources":["/Users/alexandre.nepomuceno/Documents/agenda/node_modules/@inovua/reactdatagrid-enterprise/plugins/row-reorder/utils/getDropRowIndex.js"],"sourcesContent":["/**\n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar getDropRowIndex = function getDropRowIndex(_ref) {\n  var rowHeightManager = _ref.rowHeightManager,\n    dragBoxInitialRegion = _ref.dragBoxInitialRegion,\n    dragBoxOffsets = _ref.dragBoxOffsets,\n    initialDiffTop = _ref.initialDiffTop,\n    scrollTop = _ref.scrollTop,\n    dragIndex = _ref.dragIndex,\n    dir = _ref.dir;\n  var rowOffset = dragBoxInitialRegion.top - dragBoxOffsets.top + initialDiffTop + scrollTop;\n  var currentIndex = rowHeightManager.getRowAt(rowOffset);\n  if (currentIndex < 0) {\n    return {\n      index: -1\n    };\n  }\n  var nextRowIndex = currentIndex + dir;\n  var nextRowHeight = rowHeightManager.getRowHeight(nextRowIndex);\n  var nextRowOffset = rowHeightManager.getRowOffset(nextRowIndex);\n  var halfSize = nextRowHeight / 2;\n  if (nextRowOffset < 0) {\n    nextRowOffset = 0;\n  }\n  var newDropIndex = -1;\n  if (dir > 0) {\n    if (rowOffset >= nextRowOffset - halfSize) {\n      newDropIndex = nextRowIndex;\n    }\n  }\n  if (dir < 0) {\n    if (rowOffset > nextRowOffset + halfSize + nextRowHeight) {\n      newDropIndex = currentIndex === dragIndex ? dragIndex : currentIndex + 1;\n    } else {\n      newDropIndex = currentIndex;\n    }\n  }\n  if (newDropIndex === -1) {\n    newDropIndex = currentIndex;\n  }\n  return {\n    index: newDropIndex\n  };\n};\nvar _default = getDropRowIndex;\nexports.default = _default;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;AAEZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,OAAO,GAAG,KAAK,CAAC;AACxB,IAAIC,eAAe,GAAG,SAASA,eAAeA,CAACC,IAAI,EAAE;EACnD,IAAIC,gBAAgB,GAAGD,IAAI,CAACC,gBAAgB;IAC1CC,oBAAoB,GAAGF,IAAI,CAACE,oBAAoB;IAChDC,cAAc,GAAGH,IAAI,CAACG,cAAc;IACpCC,cAAc,GAAGJ,IAAI,CAACI,cAAc;IACpCC,SAAS,GAAGL,IAAI,CAACK,SAAS;IAC1BC,SAAS,GAAGN,IAAI,CAACM,SAAS;IAC1BC,GAAG,GAAGP,IAAI,CAACO,GAAG;EAChB,IAAIC,SAAS,GAAGN,oBAAoB,CAACO,GAAG,GAAGN,cAAc,CAACM,GAAG,GAAGL,cAAc,GAAGC,SAAS;EAC1F,IAAIK,YAAY,GAAGT,gBAAgB,CAACU,QAAQ,CAACH,SAAS,CAAC;EACvD,IAAIE,YAAY,GAAG,CAAC,EAAE;IACpB,OAAO;MACLE,KAAK,EAAE,CAAC;IACV,CAAC;EACH;EACA,IAAIC,YAAY,GAAGH,YAAY,GAAGH,GAAG;EACrC,IAAIO,aAAa,GAAGb,gBAAgB,CAACc,YAAY,CAACF,YAAY,CAAC;EAC/D,IAAIG,aAAa,GAAGf,gBAAgB,CAACgB,YAAY,CAACJ,YAAY,CAAC;EAC/D,IAAIK,QAAQ,GAAGJ,aAAa,GAAG,CAAC;EAChC,IAAIE,aAAa,GAAG,CAAC,EAAE;IACrBA,aAAa,GAAG,CAAC;EACnB;EACA,IAAIG,YAAY,GAAG,CAAC,CAAC;EACrB,IAAIZ,GAAG,GAAG,CAAC,EAAE;IACX,IAAIC,SAAS,IAAIQ,aAAa,GAAGE,QAAQ,EAAE;MACzCC,YAAY,GAAGN,YAAY;IAC7B;EACF;EACA,IAAIN,GAAG,GAAG,CAAC,EAAE;IACX,IAAIC,SAAS,GAAGQ,aAAa,GAAGE,QAAQ,GAAGJ,aAAa,EAAE;MACxDK,YAAY,GAAGT,YAAY,KAAKJ,SAAS,GAAGA,SAAS,GAAGI,YAAY,GAAG,CAAC;IAC1E,CAAC,MAAM;MACLS,YAAY,GAAGT,YAAY;IAC7B;EACF;EACA,IAAIS,YAAY,KAAK,CAAC,CAAC,EAAE;IACvBA,YAAY,GAAGT,YAAY;EAC7B;EACA,OAAO;IACLE,KAAK,EAAEO;EACT,CAAC;AACH,CAAC;AACD,IAAIC,QAAQ,GAAGrB,eAAe;AAC9BH,OAAO,CAACE,OAAO,GAAGsB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"script"}