{"ast":null,"code":"/**\n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = require(\"react\");\nvar _useDataSource = require(\"@inovua/reactdatagrid-community/hooks/useDataSource\");\nvar hook = function hook(props, computedProps, computedPropsRef) {\n  var rafId = (0, _react.useRef)(null);\n  var hasVerticalScrollbar = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n    if (!computedProps) {\n      return false;\n    }\n    var scrollContainer = computedProps.getVirtualList().scrollContainer;\n    var result = scrollContainer ? scrollContainer.hasVerticalScrollbar() : false;\n    return result;\n  }, []);\n  var loadNextPageWhileNoScrollbar = function loadNextPageWhileNoScrollbar() {\n    var computedProps = computedPropsRef.current;\n    if (!computedProps) {\n      return;\n    }\n    var props = computedProps.initialProps;\n    if (Array.isArray(props.dataSource)) {\n      return;\n    }\n    if ((0, _useDataSource.isLivePagination)(props) && computedProps.hasNextPage() && !hasVerticalScrollbar()) {\n      var loadNextDelay = computedProps.livePaginationLoadNextDelay;\n      if (loadNextDelay === false) {\n        if (computedProps.dataPromiseRef.current) {\n          computedProps.dataPromiseRef.current.then(function () {\n            if (!hasVerticalScrollbar()) {\n              computedProps.gotoNextPage({\n                append: true\n              });\n            }\n          });\n        }\n        return;\n      }\n      var delay = loadNextDelay === true ? computedProps.checkResizeDelay : loadNextDelay;\n      if (typeof delay == 'number') {\n        setTimeout(function () {\n          if (Array.isArray(computedPropsRef.current.dataSource)) {\n            return;\n          }\n          if (computedProps.dataPromiseRef.current) {\n            computedProps.dataPromiseRef.current.then(function () {\n              if (!hasVerticalScrollbar()) {\n                computedProps.gotoNextPage({\n                  append: true\n                });\n              }\n            });\n          }\n        }, delay);\n      }\n    }\n  };\n  (0, _react.useEffect)(function () {\n    if (!computedPropsRef.current.computedLivePagination) {\n      return;\n    }\n    if (!computedPropsRef.current.computedLoading) {\n      if (rafId.current) {\n        cancelAnimationFrame(rafId.current);\n        rafId.current = null;\n      }\n      rafId.current = requestAnimationFrame(function () {\n        var lastId = rafId.current = requestAnimationFrame(function () {\n          if (!computedPropsRef.current.computedLoading && rafId.current === lastId) {\n            loadNextPageWhileNoScrollbar();\n          }\n        });\n      });\n    }\n  });\n  return {};\n};\nvar _default = {\n  name: 'live-pagination',\n  hook: hook,\n  defaultProps: function defaultProps() {\n    return {};\n  }\n};\nexports.default = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","_react","require","_useDataSource","hook","props","computedProps","computedPropsRef","rafId","useRef","hasVerticalScrollbar","useCallback","current","scrollContainer","getVirtualList","result","loadNextPageWhileNoScrollbar","initialProps","Array","isArray","dataSource","isLivePagination","hasNextPage","loadNextDelay","livePaginationLoadNextDelay","dataPromiseRef","then","gotoNextPage","append","delay","checkResizeDelay","setTimeout","useEffect","computedLivePagination","computedLoading","cancelAnimationFrame","requestAnimationFrame","lastId","_default","name","defaultProps"],"sources":["/Users/alexandre.nepomuceno/Documents/agendaagroamais/node_modules/@inovua/reactdatagrid-enterprise/plugins/live-pagination/index.js"],"sourcesContent":["/**\n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = require(\"react\");\nvar _useDataSource = require(\"@inovua/reactdatagrid-community/hooks/useDataSource\");\nvar hook = function hook(props, computedProps, computedPropsRef) {\n  var rafId = (0, _react.useRef)(null);\n  var hasVerticalScrollbar = (0, _react.useCallback)(function () {\n    var computedProps = computedPropsRef.current;\n    if (!computedProps) {\n      return false;\n    }\n    var scrollContainer = computedProps.getVirtualList().scrollContainer;\n    var result = scrollContainer ? scrollContainer.hasVerticalScrollbar() : false;\n    return result;\n  }, []);\n  var loadNextPageWhileNoScrollbar = function loadNextPageWhileNoScrollbar() {\n    var computedProps = computedPropsRef.current;\n    if (!computedProps) {\n      return;\n    }\n    var props = computedProps.initialProps;\n    if (Array.isArray(props.dataSource)) {\n      return;\n    }\n    if ((0, _useDataSource.isLivePagination)(props) && computedProps.hasNextPage() && !hasVerticalScrollbar()) {\n      var loadNextDelay = computedProps.livePaginationLoadNextDelay;\n      if (loadNextDelay === false) {\n        if (computedProps.dataPromiseRef.current) {\n          computedProps.dataPromiseRef.current.then(function () {\n            if (!hasVerticalScrollbar()) {\n              computedProps.gotoNextPage({\n                append: true\n              });\n            }\n          });\n        }\n        return;\n      }\n      var delay = loadNextDelay === true ? computedProps.checkResizeDelay : loadNextDelay;\n      if (typeof delay == 'number') {\n        setTimeout(function () {\n          if (Array.isArray(computedPropsRef.current.dataSource)) {\n            return;\n          }\n          if (computedProps.dataPromiseRef.current) {\n            computedProps.dataPromiseRef.current.then(function () {\n              if (!hasVerticalScrollbar()) {\n                computedProps.gotoNextPage({\n                  append: true\n                });\n              }\n            });\n          }\n        }, delay);\n      }\n    }\n  };\n  (0, _react.useEffect)(function () {\n    if (!computedPropsRef.current.computedLivePagination) {\n      return;\n    }\n    if (!computedPropsRef.current.computedLoading) {\n      if (rafId.current) {\n        cancelAnimationFrame(rafId.current);\n        rafId.current = null;\n      }\n      rafId.current = requestAnimationFrame(function () {\n        var lastId = rafId.current = requestAnimationFrame(function () {\n          if (!computedPropsRef.current.computedLoading && rafId.current === lastId) {\n            loadNextPageWhileNoScrollbar();\n          }\n        });\n      });\n    }\n  });\n  return {};\n};\nvar _default = {\n  name: 'live-pagination',\n  hook: hook,\n  defaultProps: function defaultProps() {\n    return {};\n  }\n};\nexports.default = _default;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}