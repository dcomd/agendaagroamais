{"ast":null,"code":"/**\n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateBucketSummaries = exports.getDefaultGroupSummaryValue = exports.flatten = exports.default = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nvar get = function get(item, field) {\n  return item[field];\n};\nvar defaultStringify = function defaultStringify(obj) {\n  var type = (0, _typeof2.default)(obj);\n  return type == 'string' || type === 'number' || type === 'boolean' ? \"\".concat(obj) : JSON.stringify(obj);\n};\nvar getShowSummaryRow = function getShowSummaryRow(showGroupSummaryRow, groupData, pivot) {\n  if (!showGroupSummaryRow || !groupData || pivot) {\n    return false;\n  }\n  if (typeof showGroupSummaryRow === 'function') {\n    showGroupSummaryRow = showGroupSummaryRow(groupData);\n  }\n  if (showGroupSummaryRow === true) {\n    showGroupSummaryRow = 'end';\n  }\n  if (!showGroupSummaryRow) {\n    showGroupSummaryRow = false;\n  }\n  return showGroupSummaryRow;\n};\nvar completeBucketSummaries = function completeBucketSummaries(bucket, _ref) {\n  var groupSummaryReducer = _ref.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref.pivotColumnSummaryReducers;\n  if (groupSummaryReducer && groupSummaryReducer.complete) {\n    bucket.groupSummary = groupSummaryReducer.complete(bucket.groupSummary, bucket.array);\n  }\n  if (groupColumnSummaryReducers) {\n    bucket.groupColumnSummary = Object.keys(groupColumnSummaryReducers).reduce(function (acc, key) {\n      var value = acc[key];\n      var reducer = groupColumnSummaryReducers[key];\n      if (reducer.complete) {\n        acc[key] = reducer.complete(value, bucket.array);\n      }\n      return acc;\n    }, bucket.groupColumnSummary);\n    if (bucket.pivotSummary !== null) {\n      completePivotBucketSummaries(bucket, {\n        groupColumnSummaryReducers: groupColumnSummaryReducers,\n        pivotColumnSummaryReducers: pivotColumnSummaryReducers\n      });\n    }\n  }\n  return bucket;\n};\nvar completeGroupColumnSummaryReducers = function completeGroupColumnSummaryReducers(target, array, groupColumnSummaryReducers) {\n  if (!target || !groupColumnSummaryReducers) {\n    return null;\n  }\n  return Object.keys(groupColumnSummaryReducers).reduce(function (acc, colId) {\n    var reducer = groupColumnSummaryReducers[colId];\n    if (reducer.complete) {\n      acc[colId] = reducer.complete(acc[colId], array);\n    }\n    return acc;\n  }, target);\n};\nvar completePivotBucketSummaries = function completePivotBucketSummaries(pivotSummaryBucket, _ref2) {\n  var groupColumnSummaryReducers = _ref2.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref2.pivotColumnSummaryReducers;\n  if (!pivotSummaryBucket.pivotSummary) {\n    return;\n  }\n  Object.keys(pivotSummaryBucket.pivotSummary).forEach(function (groupName) {\n    var pivotBucket = pivotSummaryBucket.pivotSummary[groupName];\n    pivotBucket.values = completeGroupColumnSummaryReducers(pivotBucket.values, pivotBucket.array, groupColumnSummaryReducers);\n    completePivotBucketSummaries(pivotBucket, {\n      groupColumnSummaryReducers: groupColumnSummaryReducers,\n      pivotColumnSummaryReducers: pivotColumnSummaryReducers\n    });\n    if (pivotBucket.pivotColumnSummary && pivotColumnSummaryReducers && pivotColumnSummaryReducers[pivotBucket.field]) {\n      var pivotColumnSummaryReducer = pivotColumnSummaryReducers[pivotBucket.field];\n      if (pivotColumnSummaryReducer.complete) {\n        pivotBucket.pivotColumnSummary[pivotBucket.field] = pivotColumnSummaryReducer.complete(pivotBucket.pivotColumnSummary[pivotBucket.field], pivotBucket.array);\n      }\n    }\n  });\n};\nvar createGroupItem = function createGroupItem(key, bucket) {\n  return {\n    __group: true,\n    leaf: !bucket.data,\n    value: key,\n    depth: bucket.depth,\n    groupSummary: bucket.groupSummary,\n    groupColumnSummary: bucket.groupColumnSummary,\n    pivotSummary: bucket.pivotSummary,\n    keyPath: bucket.keyPath,\n    fieldPath: bucket.fieldPath\n  };\n};\nvar flatten = function flatten(bucket, _ref3) {\n  var pivot = _ref3.pivot,\n    groupSummaryReducer = _ref3.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref3.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref3.pivotColumnSummaryReducers,\n    isCollapsed = _ref3.isCollapsed,\n    showGroupSummaryRow = _ref3.showGroupSummaryRow;\n  var data = [];\n  var indexesInGroups = [];\n  var groupCounts = [];\n  completeBucketSummaries(bucket, {\n    groupSummaryReducer: groupSummaryReducer,\n    groupColumnSummaryReducers: groupColumnSummaryReducers,\n    pivotColumnSummaryReducers: pivotColumnSummaryReducers\n  });\n  var shouldInclude = true;\n  var showSummaryRow;\n  var summaryGroupItem;\n  if (!bucket.data) {\n    var groupItem = createGroupItem(bucket.key, bucket);\n    data = [groupItem];\n    indexesInGroups = [-1];\n    groupCounts = [-1];\n    shouldInclude = !pivot;\n    if (isCollapsed && isCollapsed(groupItem)) {\n      shouldInclude = false;\n    }\n    if (shouldInclude) {\n      showSummaryRow = getShowSummaryRow(showGroupSummaryRow, groupItem, pivot);\n      summaryGroupItem = showSummaryRow ? _objectSpread(_objectSpread({}, groupItem.groupColumnSummary), {}, {\n        __parentGroup: groupItem,\n        __summary: showSummaryRow\n      }) : null;\n      var indexesInGroupsOffset = 0;\n      if (showSummaryRow === 'start') {\n        data.push(summaryGroupItem);\n        groupCounts.push(-1);\n        indexesInGroups.push(-1);\n      }\n      data = data.concat(bucket.array);\n      indexesInGroups = indexesInGroups.concat(bucket.array.map(function (_, index) {\n        return index + indexesInGroupsOffset;\n      }));\n      groupCounts = groupCounts.concat(bucket.array.map(function (_) {\n        return bucket.array.length;\n      }));\n      if (showSummaryRow === 'end') {\n        data.push(summaryGroupItem);\n        indexesInGroups.push(-1);\n        groupCounts.push(-1);\n      }\n    }\n  } else {\n    var _groupItem = bucket.key != null ? createGroupItem(bucket.key, bucket) : null;\n    data = _groupItem ? [_groupItem] : [];\n    indexesInGroups = _groupItem ? [-1] : [];\n    groupCounts = _groupItem ? [-1] : [];\n    if (_groupItem && isCollapsed && isCollapsed(_groupItem)) {\n      shouldInclude = false;\n    }\n    if (shouldInclude) {\n      showSummaryRow = getShowSummaryRow(showGroupSummaryRow, _groupItem, pivot);\n      summaryGroupItem = showSummaryRow ? _objectSpread(_objectSpread({}, _groupItem.groupColumnSummary), {}, {\n        __parentGroup: _groupItem,\n        __summary: showSummaryRow\n      }) : null;\n      if (showSummaryRow === 'start') {\n        data.push(summaryGroupItem);\n        indexesInGroups.push(-1);\n        groupCounts.push(-1);\n      }\n      data = bucket.order.reduce(function (data, key) {\n        var childBucket = bucket.data[key];\n        var result = flatten(childBucket, {\n          pivot: pivot,\n          isCollapsed: isCollapsed,\n          showGroupSummaryRow: showGroupSummaryRow,\n          groupColumnSummaryReducers: groupColumnSummaryReducers,\n          groupSummaryReducer: groupSummaryReducer,\n          pivotColumnSummaryReducers: pivotColumnSummaryReducers\n        });\n        indexesInGroups = indexesInGroups.concat(result.indexesInGroups);\n        groupCounts = groupCounts.concat(result.groupCounts);\n        return data.concat(result.data);\n      }, data);\n      if (showSummaryRow === 'end') {\n        data.push(summaryGroupItem);\n        indexesInGroups.push(-1);\n        groupCounts.push(-1);\n      }\n    }\n  }\n  return {\n    indexesInGroups: indexesInGroups,\n    groupCounts: groupCounts,\n    bucket: bucket,\n    data: data\n  };\n};\nexports.flatten = flatten;\nvar buildDataBucket = function buildDataBucket(_ref4) {\n  var field = _ref4.field,\n    key = _ref4.key,\n    parent = _ref4.parent,\n    groupSummaryReducer = _ref4.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref4.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref4.pivotColumnSummaryReducers;\n  return {\n    key: key,\n    field: field,\n    fieldPath: parent && field ? [].concat((0, _toConsumableArray2.default)(parent.fieldPath), [field]) : [],\n    keyPath: parent && key ? [].concat((0, _toConsumableArray2.default)(parent.keyPath), [key]) : [],\n    order: [],\n    array: [],\n    data: null,\n    depth: parent ? parent.depth + 1 : 0,\n    groupSummary: groupSummaryReducer ? groupSummaryReducer.initialValue : null,\n    groupColumnSummary: getDefaultGroupSummaryValue(groupColumnSummaryReducers),\n    pivotColumnSummary: getDefaultGroupSummaryValue(pivotColumnSummaryReducers),\n    pivotSummary: null\n  };\n};\nvar groupAndPivot = function groupAndPivot(data, _ref5) {\n  var groupBy = _ref5.groupBy,\n    pivot = _ref5.pivot,\n    columnsMap = _ref5.columnsMap,\n    _ref5$stringify = _ref5.stringify,\n    stringify = _ref5$stringify === void 0 ? defaultStringify : _ref5$stringify,\n    groupSummaryReducer = _ref5.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref5.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref5.pivotColumnSummaryReducers;\n  var masterBucket = buildDataBucket({\n    field: null,\n    parent: null,\n    key: null,\n    groupSummaryReducer: groupSummaryReducer,\n    groupColumnSummaryReducers: groupColumnSummaryReducers,\n    pivotColumnSummaryReducers: pivotColumnSummaryReducers\n  });\n  if (pivot && pivot.length) {\n    masterBucket.pivotUniqueValuesPerColumn = {\n      field: null,\n      values: null\n    };\n  }\n  var onItem = function onItem(item) {\n    var rootBucket = masterBucket;\n    updateBucketSummaries(rootBucket, item, {\n      groupSummaryReducer: groupSummaryReducer,\n      groupColumnSummaryReducers: groupColumnSummaryReducers,\n      columnsMap: columnsMap\n    });\n    groupBy.forEach(function (field) {\n      var fieldValue = get(item, field);\n      var toString = columnsMap[field] ? columnsMap[field].groupToString || stringify : stringify;\n      var stringKey = toString(fieldValue, {\n        data: item,\n        field: field\n      });\n      if (!rootBucket.data) {\n        rootBucket.data = {};\n      }\n      var currentBucket = rootBucket.data[stringKey];\n      if (!currentBucket) {\n        currentBucket = rootBucket.data[stringKey] = buildDataBucket({\n          field: field,\n          key: stringKey,\n          parent: rootBucket,\n          groupSummaryReducer: groupSummaryReducer,\n          groupColumnSummaryReducers: groupColumnSummaryReducers\n        });\n        rootBucket.order.push(stringKey);\n      }\n      currentBucket.array.push(item);\n      updateBucketSummaries(currentBucket, item, {\n        groupSummaryReducer: groupSummaryReducer,\n        groupColumnSummaryReducers: groupColumnSummaryReducers,\n        columnsMap: columnsMap\n      });\n      if (pivot && pivot.length) {\n        var pivotBucketOwner = currentBucket;\n        var uniqueValuesRoot = masterBucket.pivotUniqueValuesPerColumn;\n        pivot.forEach(function (field) {\n          field = typeof field === 'string' ? field : field.name;\n          var fieldValue = get(item, field);\n          var col = columnsMap[field];\n          var toString = col ? col.pivotToString || col.groupToString || stringify : stringify;\n          var stringKey = toString(fieldValue, {\n            data: item,\n            field: field\n          });\n          if (!pivotBucketOwner.pivotSummary) {\n            pivotBucketOwner.pivotSummary = {};\n          }\n          if (!pivotBucketOwner.pivotColumnSummary) {\n            pivotBucketOwner.pivotColumnSummary = {};\n          }\n          var currentPivotSummaryBucket = pivotBucketOwner.pivotSummary;\n          pivotBucketOwner = updateBucketPivotSummary(currentPivotSummaryBucket, item, {\n            field: field,\n            groupName: stringKey,\n            groupColumnSummaryReducers: groupColumnSummaryReducers,\n            pivotColumnSummaryReducers: pivotColumnSummaryReducers ? (0, _defineProperty2.default)({}, field, pivotColumnSummaryReducers[field]) : undefined,\n            columnsMap: columnsMap\n          });\n          if (!uniqueValuesRoot.field) {\n            uniqueValuesRoot.field = field;\n            uniqueValuesRoot.values = {};\n          }\n          if (!uniqueValuesRoot.values[stringKey]) {\n            uniqueValuesRoot.values[stringKey] = {\n              field: null,\n              values: null\n            };\n          }\n          uniqueValuesRoot = uniqueValuesRoot.values[stringKey];\n        });\n      }\n      rootBucket = currentBucket;\n    });\n  };\n  data.forEach(onItem);\n  return masterBucket;\n};\nvar updateBucketSummaries = function updateBucketSummaries(currentBucket, item, _ref7) {\n  var groupSummaryReducer = _ref7.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref7.groupColumnSummaryReducers,\n    columnsMap = _ref7.columnsMap;\n  if (groupSummaryReducer) {\n    currentBucket.groupSummary = groupSummaryReducer.reducer(currentBucket.groupSummary, item, item);\n  }\n  if (groupColumnSummaryReducers) {\n    currentBucket.groupColumnSummary = Object.keys(groupColumnSummaryReducers).reduce(function (columnSummaries, colId) {\n      var col = columnsMap[colId];\n      var value = col.name ? item[col.name] : item[colId];\n      columnSummaries[colId] = groupColumnSummaryReducers[colId].reducer(columnSummaries[colId], value, item);\n      return columnSummaries;\n    }, currentBucket.groupColumnSummary);\n  }\n};\nexports.updateBucketSummaries = updateBucketSummaries;\nvar updateBucketPivotSummary = function updateBucketPivotSummary(currentBucket, item, _ref8) {\n  var groupColumnSummaryReducers = _ref8.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref8.pivotColumnSummaryReducers,\n    groupName = _ref8.groupName,\n    field = _ref8.field,\n    columnsMap = _ref8.columnsMap;\n  groupColumnSummaryReducers = groupColumnSummaryReducers || {};\n  pivotColumnSummaryReducers = pivotColumnSummaryReducers || {};\n  if (!currentBucket[groupName]) {\n    currentBucket[groupName] = {\n      array: [],\n      field: field,\n      values: getDefaultGroupSummaryValue(groupColumnSummaryReducers),\n      pivotColumnSummary: getDefaultGroupSummaryValue(pivotColumnSummaryReducers),\n      pivotSummary: null\n    };\n  }\n  currentBucket[groupName].array.push(item);\n  currentBucket[groupName].values = Object.keys(groupColumnSummaryReducers).reduce(function (columnSummaries, colId) {\n    var col = columnsMap[colId];\n    var value = col.name ? item[col.name] : item[colId];\n    columnSummaries[colId] = groupColumnSummaryReducers[colId].reducer(columnSummaries[colId], value, item);\n    return columnSummaries;\n  }, currentBucket[groupName].values);\n  currentBucket[groupName].pivotColumnSummary = Object.keys(pivotColumnSummaryReducers).reduce(function (pivotColumnSummaries, colId) {\n    if (pivotColumnSummaryReducers[colId]) {\n      pivotColumnSummaries[colId] = pivotColumnSummaryReducers[colId].reducer(pivotColumnSummaries[colId], groupName, item);\n    }\n    return pivotColumnSummaries;\n  }, currentBucket[groupName].pivotColumnSummary);\n  return currentBucket[groupName];\n};\nvar getDefaultGroupSummaryValue = function getDefaultGroupSummaryValue(groupColumnSummaryReducers) {\n  return groupColumnSummaryReducers ? Object.keys(groupColumnSummaryReducers).reduce(function (acc, key) {\n    if (groupColumnSummaryReducers[key]) {\n      acc[key] = groupColumnSummaryReducers[key].initialValue;\n    }\n    return acc;\n  }, {}) : null;\n};\nexports.getDefaultGroupSummaryValue = getDefaultGroupSummaryValue;\nvar _default = groupAndPivot;\nexports.default = _default;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","updateBucketSummaries","getDefaultGroupSummaryValue","flatten","default","_toConsumableArray2","_defineProperty2","_typeof2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","get","item","field","defaultStringify","obj","type","concat","JSON","stringify","getShowSummaryRow","showGroupSummaryRow","groupData","pivot","completeBucketSummaries","bucket","_ref","groupSummaryReducer","groupColumnSummaryReducers","pivotColumnSummaryReducers","complete","groupSummary","array","groupColumnSummary","reduce","acc","reducer","pivotSummary","completePivotBucketSummaries","completeGroupColumnSummaryReducers","colId","pivotSummaryBucket","_ref2","groupName","pivotBucket","values","pivotColumnSummary","pivotColumnSummaryReducer","createGroupItem","__group","leaf","data","depth","keyPath","fieldPath","_ref3","isCollapsed","indexesInGroups","groupCounts","shouldInclude","showSummaryRow","summaryGroupItem","groupItem","__parentGroup","__summary","indexesInGroupsOffset","map","_","index","_groupItem","order","childBucket","result","buildDataBucket","_ref4","parent","initialValue","groupAndPivot","_ref5","groupBy","columnsMap","_ref5$stringify","masterBucket","pivotUniqueValuesPerColumn","onItem","rootBucket","fieldValue","toString","groupToString","stringKey","currentBucket","pivotBucketOwner","uniqueValuesRoot","name","col","pivotToString","currentPivotSummaryBucket","updateBucketPivotSummary","undefined","_ref7","columnSummaries","_ref8","pivotColumnSummaries","_default"],"sources":["/Users/alexandre.nepomuceno/Documents/agendaagroamais/node_modules/@inovua/reactdatagrid-enterprise/plugins/group-and-pivot/groupAndPivot/index.js"],"sourcesContent":["/**\n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the Commercial License found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateBucketSummaries = exports.getDefaultGroupSummaryValue = exports.flatten = exports.default = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar get = function get(item, field) {\n  return item[field];\n};\nvar defaultStringify = function defaultStringify(obj) {\n  var type = (0, _typeof2.default)(obj);\n  return type == 'string' || type === 'number' || type === 'boolean' ? \"\".concat(obj) : JSON.stringify(obj);\n};\nvar getShowSummaryRow = function getShowSummaryRow(showGroupSummaryRow, groupData, pivot) {\n  if (!showGroupSummaryRow || !groupData || pivot) {\n    return false;\n  }\n  if (typeof showGroupSummaryRow === 'function') {\n    showGroupSummaryRow = showGroupSummaryRow(groupData);\n  }\n  if (showGroupSummaryRow === true) {\n    showGroupSummaryRow = 'end';\n  }\n  if (!showGroupSummaryRow) {\n    showGroupSummaryRow = false;\n  }\n  return showGroupSummaryRow;\n};\nvar completeBucketSummaries = function completeBucketSummaries(bucket, _ref) {\n  var groupSummaryReducer = _ref.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref.pivotColumnSummaryReducers;\n  if (groupSummaryReducer && groupSummaryReducer.complete) {\n    bucket.groupSummary = groupSummaryReducer.complete(bucket.groupSummary, bucket.array);\n  }\n  if (groupColumnSummaryReducers) {\n    bucket.groupColumnSummary = Object.keys(groupColumnSummaryReducers).reduce(function (acc, key) {\n      var value = acc[key];\n      var reducer = groupColumnSummaryReducers[key];\n      if (reducer.complete) {\n        acc[key] = reducer.complete(value, bucket.array);\n      }\n      return acc;\n    }, bucket.groupColumnSummary);\n    if (bucket.pivotSummary !== null) {\n      completePivotBucketSummaries(bucket, {\n        groupColumnSummaryReducers: groupColumnSummaryReducers,\n        pivotColumnSummaryReducers: pivotColumnSummaryReducers\n      });\n    }\n  }\n  return bucket;\n};\nvar completeGroupColumnSummaryReducers = function completeGroupColumnSummaryReducers(target, array, groupColumnSummaryReducers) {\n  if (!target || !groupColumnSummaryReducers) {\n    return null;\n  }\n  return Object.keys(groupColumnSummaryReducers).reduce(function (acc, colId) {\n    var reducer = groupColumnSummaryReducers[colId];\n    if (reducer.complete) {\n      acc[colId] = reducer.complete(acc[colId], array);\n    }\n    return acc;\n  }, target);\n};\nvar completePivotBucketSummaries = function completePivotBucketSummaries(pivotSummaryBucket, _ref2) {\n  var groupColumnSummaryReducers = _ref2.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref2.pivotColumnSummaryReducers;\n  if (!pivotSummaryBucket.pivotSummary) {\n    return;\n  }\n  Object.keys(pivotSummaryBucket.pivotSummary).forEach(function (groupName) {\n    var pivotBucket = pivotSummaryBucket.pivotSummary[groupName];\n    pivotBucket.values = completeGroupColumnSummaryReducers(pivotBucket.values, pivotBucket.array, groupColumnSummaryReducers);\n    completePivotBucketSummaries(pivotBucket, {\n      groupColumnSummaryReducers: groupColumnSummaryReducers,\n      pivotColumnSummaryReducers: pivotColumnSummaryReducers\n    });\n    if (pivotBucket.pivotColumnSummary && pivotColumnSummaryReducers && pivotColumnSummaryReducers[pivotBucket.field]) {\n      var pivotColumnSummaryReducer = pivotColumnSummaryReducers[pivotBucket.field];\n      if (pivotColumnSummaryReducer.complete) {\n        pivotBucket.pivotColumnSummary[pivotBucket.field] = pivotColumnSummaryReducer.complete(pivotBucket.pivotColumnSummary[pivotBucket.field], pivotBucket.array);\n      }\n    }\n  });\n};\nvar createGroupItem = function createGroupItem(key, bucket) {\n  return {\n    __group: true,\n    leaf: !bucket.data,\n    value: key,\n    depth: bucket.depth,\n    groupSummary: bucket.groupSummary,\n    groupColumnSummary: bucket.groupColumnSummary,\n    pivotSummary: bucket.pivotSummary,\n    keyPath: bucket.keyPath,\n    fieldPath: bucket.fieldPath\n  };\n};\nvar flatten = function flatten(bucket, _ref3) {\n  var pivot = _ref3.pivot,\n    groupSummaryReducer = _ref3.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref3.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref3.pivotColumnSummaryReducers,\n    isCollapsed = _ref3.isCollapsed,\n    showGroupSummaryRow = _ref3.showGroupSummaryRow;\n  var data = [];\n  var indexesInGroups = [];\n  var groupCounts = [];\n  completeBucketSummaries(bucket, {\n    groupSummaryReducer: groupSummaryReducer,\n    groupColumnSummaryReducers: groupColumnSummaryReducers,\n    pivotColumnSummaryReducers: pivotColumnSummaryReducers\n  });\n  var shouldInclude = true;\n  var showSummaryRow;\n  var summaryGroupItem;\n  if (!bucket.data) {\n    var groupItem = createGroupItem(bucket.key, bucket);\n    data = [groupItem];\n    indexesInGroups = [-1];\n    groupCounts = [-1];\n    shouldInclude = !pivot;\n    if (isCollapsed && isCollapsed(groupItem)) {\n      shouldInclude = false;\n    }\n    if (shouldInclude) {\n      showSummaryRow = getShowSummaryRow(showGroupSummaryRow, groupItem, pivot);\n      summaryGroupItem = showSummaryRow ? _objectSpread(_objectSpread({}, groupItem.groupColumnSummary), {}, {\n        __parentGroup: groupItem,\n        __summary: showSummaryRow\n      }) : null;\n      var indexesInGroupsOffset = 0;\n      if (showSummaryRow === 'start') {\n        data.push(summaryGroupItem);\n        groupCounts.push(-1);\n        indexesInGroups.push(-1);\n      }\n      data = data.concat(bucket.array);\n      indexesInGroups = indexesInGroups.concat(bucket.array.map(function (_, index) {\n        return index + indexesInGroupsOffset;\n      }));\n      groupCounts = groupCounts.concat(bucket.array.map(function (_) {\n        return bucket.array.length;\n      }));\n      if (showSummaryRow === 'end') {\n        data.push(summaryGroupItem);\n        indexesInGroups.push(-1);\n        groupCounts.push(-1);\n      }\n    }\n  } else {\n    var _groupItem = bucket.key != null ? createGroupItem(bucket.key, bucket) : null;\n    data = _groupItem ? [_groupItem] : [];\n    indexesInGroups = _groupItem ? [-1] : [];\n    groupCounts = _groupItem ? [-1] : [];\n    if (_groupItem && isCollapsed && isCollapsed(_groupItem)) {\n      shouldInclude = false;\n    }\n    if (shouldInclude) {\n      showSummaryRow = getShowSummaryRow(showGroupSummaryRow, _groupItem, pivot);\n      summaryGroupItem = showSummaryRow ? _objectSpread(_objectSpread({}, _groupItem.groupColumnSummary), {}, {\n        __parentGroup: _groupItem,\n        __summary: showSummaryRow\n      }) : null;\n      if (showSummaryRow === 'start') {\n        data.push(summaryGroupItem);\n        indexesInGroups.push(-1);\n        groupCounts.push(-1);\n      }\n      data = bucket.order.reduce(function (data, key) {\n        var childBucket = bucket.data[key];\n        var result = flatten(childBucket, {\n          pivot: pivot,\n          isCollapsed: isCollapsed,\n          showGroupSummaryRow: showGroupSummaryRow,\n          groupColumnSummaryReducers: groupColumnSummaryReducers,\n          groupSummaryReducer: groupSummaryReducer,\n          pivotColumnSummaryReducers: pivotColumnSummaryReducers\n        });\n        indexesInGroups = indexesInGroups.concat(result.indexesInGroups);\n        groupCounts = groupCounts.concat(result.groupCounts);\n        return data.concat(result.data);\n      }, data);\n      if (showSummaryRow === 'end') {\n        data.push(summaryGroupItem);\n        indexesInGroups.push(-1);\n        groupCounts.push(-1);\n      }\n    }\n  }\n  return {\n    indexesInGroups: indexesInGroups,\n    groupCounts: groupCounts,\n    bucket: bucket,\n    data: data\n  };\n};\nexports.flatten = flatten;\nvar buildDataBucket = function buildDataBucket(_ref4) {\n  var field = _ref4.field,\n    key = _ref4.key,\n    parent = _ref4.parent,\n    groupSummaryReducer = _ref4.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref4.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref4.pivotColumnSummaryReducers;\n  return {\n    key: key,\n    field: field,\n    fieldPath: parent && field ? [].concat((0, _toConsumableArray2.default)(parent.fieldPath), [field]) : [],\n    keyPath: parent && key ? [].concat((0, _toConsumableArray2.default)(parent.keyPath), [key]) : [],\n    order: [],\n    array: [],\n    data: null,\n    depth: parent ? parent.depth + 1 : 0,\n    groupSummary: groupSummaryReducer ? groupSummaryReducer.initialValue : null,\n    groupColumnSummary: getDefaultGroupSummaryValue(groupColumnSummaryReducers),\n    pivotColumnSummary: getDefaultGroupSummaryValue(pivotColumnSummaryReducers),\n    pivotSummary: null\n  };\n};\nvar groupAndPivot = function groupAndPivot(data, _ref5) {\n  var groupBy = _ref5.groupBy,\n    pivot = _ref5.pivot,\n    columnsMap = _ref5.columnsMap,\n    _ref5$stringify = _ref5.stringify,\n    stringify = _ref5$stringify === void 0 ? defaultStringify : _ref5$stringify,\n    groupSummaryReducer = _ref5.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref5.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref5.pivotColumnSummaryReducers;\n  var masterBucket = buildDataBucket({\n    field: null,\n    parent: null,\n    key: null,\n    groupSummaryReducer: groupSummaryReducer,\n    groupColumnSummaryReducers: groupColumnSummaryReducers,\n    pivotColumnSummaryReducers: pivotColumnSummaryReducers\n  });\n  if (pivot && pivot.length) {\n    masterBucket.pivotUniqueValuesPerColumn = {\n      field: null,\n      values: null\n    };\n  }\n  var onItem = function onItem(item) {\n    var rootBucket = masterBucket;\n    updateBucketSummaries(rootBucket, item, {\n      groupSummaryReducer: groupSummaryReducer,\n      groupColumnSummaryReducers: groupColumnSummaryReducers,\n      columnsMap: columnsMap\n    });\n    groupBy.forEach(function (field) {\n      var fieldValue = get(item, field);\n      var toString = columnsMap[field] ? columnsMap[field].groupToString || stringify : stringify;\n      var stringKey = toString(fieldValue, {\n        data: item,\n        field: field\n      });\n      if (!rootBucket.data) {\n        rootBucket.data = {};\n      }\n      var currentBucket = rootBucket.data[stringKey];\n      if (!currentBucket) {\n        currentBucket = rootBucket.data[stringKey] = buildDataBucket({\n          field: field,\n          key: stringKey,\n          parent: rootBucket,\n          groupSummaryReducer: groupSummaryReducer,\n          groupColumnSummaryReducers: groupColumnSummaryReducers\n        });\n        rootBucket.order.push(stringKey);\n      }\n      currentBucket.array.push(item);\n      updateBucketSummaries(currentBucket, item, {\n        groupSummaryReducer: groupSummaryReducer,\n        groupColumnSummaryReducers: groupColumnSummaryReducers,\n        columnsMap: columnsMap\n      });\n      if (pivot && pivot.length) {\n        var pivotBucketOwner = currentBucket;\n        var uniqueValuesRoot = masterBucket.pivotUniqueValuesPerColumn;\n        pivot.forEach(function (field) {\n          field = typeof field === 'string' ? field : field.name;\n          var fieldValue = get(item, field);\n          var col = columnsMap[field];\n          var toString = col ? col.pivotToString || col.groupToString || stringify : stringify;\n          var stringKey = toString(fieldValue, {\n            data: item,\n            field: field\n          });\n          if (!pivotBucketOwner.pivotSummary) {\n            pivotBucketOwner.pivotSummary = {};\n          }\n          if (!pivotBucketOwner.pivotColumnSummary) {\n            pivotBucketOwner.pivotColumnSummary = {};\n          }\n          var currentPivotSummaryBucket = pivotBucketOwner.pivotSummary;\n          pivotBucketOwner = updateBucketPivotSummary(currentPivotSummaryBucket, item, {\n            field: field,\n            groupName: stringKey,\n            groupColumnSummaryReducers: groupColumnSummaryReducers,\n            pivotColumnSummaryReducers: pivotColumnSummaryReducers ? (0, _defineProperty2.default)({}, field, pivotColumnSummaryReducers[field]) : undefined,\n            columnsMap: columnsMap\n          });\n          if (!uniqueValuesRoot.field) {\n            uniqueValuesRoot.field = field;\n            uniqueValuesRoot.values = {};\n          }\n          if (!uniqueValuesRoot.values[stringKey]) {\n            uniqueValuesRoot.values[stringKey] = {\n              field: null,\n              values: null\n            };\n          }\n          uniqueValuesRoot = uniqueValuesRoot.values[stringKey];\n        });\n      }\n      rootBucket = currentBucket;\n    });\n  };\n  data.forEach(onItem);\n  return masterBucket;\n};\nvar updateBucketSummaries = function updateBucketSummaries(currentBucket, item, _ref7) {\n  var groupSummaryReducer = _ref7.groupSummaryReducer,\n    groupColumnSummaryReducers = _ref7.groupColumnSummaryReducers,\n    columnsMap = _ref7.columnsMap;\n  if (groupSummaryReducer) {\n    currentBucket.groupSummary = groupSummaryReducer.reducer(currentBucket.groupSummary, item, item);\n  }\n  if (groupColumnSummaryReducers) {\n    currentBucket.groupColumnSummary = Object.keys(groupColumnSummaryReducers).reduce(function (columnSummaries, colId) {\n      var col = columnsMap[colId];\n      var value = col.name ? item[col.name] : item[colId];\n      columnSummaries[colId] = groupColumnSummaryReducers[colId].reducer(columnSummaries[colId], value, item);\n      return columnSummaries;\n    }, currentBucket.groupColumnSummary);\n  }\n};\nexports.updateBucketSummaries = updateBucketSummaries;\nvar updateBucketPivotSummary = function updateBucketPivotSummary(currentBucket, item, _ref8) {\n  var groupColumnSummaryReducers = _ref8.groupColumnSummaryReducers,\n    pivotColumnSummaryReducers = _ref8.pivotColumnSummaryReducers,\n    groupName = _ref8.groupName,\n    field = _ref8.field,\n    columnsMap = _ref8.columnsMap;\n  groupColumnSummaryReducers = groupColumnSummaryReducers || {};\n  pivotColumnSummaryReducers = pivotColumnSummaryReducers || {};\n  if (!currentBucket[groupName]) {\n    currentBucket[groupName] = {\n      array: [],\n      field: field,\n      values: getDefaultGroupSummaryValue(groupColumnSummaryReducers),\n      pivotColumnSummary: getDefaultGroupSummaryValue(pivotColumnSummaryReducers),\n      pivotSummary: null\n    };\n  }\n  currentBucket[groupName].array.push(item);\n  currentBucket[groupName].values = Object.keys(groupColumnSummaryReducers).reduce(function (columnSummaries, colId) {\n    var col = columnsMap[colId];\n    var value = col.name ? item[col.name] : item[colId];\n    columnSummaries[colId] = groupColumnSummaryReducers[colId].reducer(columnSummaries[colId], value, item);\n    return columnSummaries;\n  }, currentBucket[groupName].values);\n  currentBucket[groupName].pivotColumnSummary = Object.keys(pivotColumnSummaryReducers).reduce(function (pivotColumnSummaries, colId) {\n    if (pivotColumnSummaryReducers[colId]) {\n      pivotColumnSummaries[colId] = pivotColumnSummaryReducers[colId].reducer(pivotColumnSummaries[colId], groupName, item);\n    }\n    return pivotColumnSummaries;\n  }, currentBucket[groupName].pivotColumnSummary);\n  return currentBucket[groupName];\n};\nvar getDefaultGroupSummaryValue = function getDefaultGroupSummaryValue(groupColumnSummaryReducers) {\n  return groupColumnSummaryReducers ? Object.keys(groupColumnSummaryReducers).reduce(function (acc, key) {\n    if (groupColumnSummaryReducers[key]) {\n      acc[key] = groupColumnSummaryReducers[key].initialValue;\n    }\n    return acc;\n  }, {}) : null;\n};\nexports.getDefaultGroupSummaryValue = getDefaultGroupSummaryValue;\nvar _default = groupAndPivot;\nexports.default = _default;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}