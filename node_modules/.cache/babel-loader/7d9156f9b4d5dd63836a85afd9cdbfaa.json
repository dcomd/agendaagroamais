{"ast":null,"code":"/** \n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.notifySelection = exports.handleSingleSelection = exports.handleSelection = exports.handleMultiSelectionRowToggle = exports.handleMultiSelection = exports.findInitialSelectionIndex = void 0;\nvar _isControlledProperty = _interopRequireDefault(require(\"../../utils/isControlledProperty\"));\nvar _batchUpdate = _interopRequireDefault(require(\"../../utils/batchUpdate\"));\nvar _getGlobal = require(\"../../getGlobal\");\nvar globalObject = (0, _getGlobal.getGlobal)();\nvar ua = globalObject.navigator ? globalObject.navigator.userAgent : '';\nvar isSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\nvar delay35 = function delay35(fn) {\n  return function () {\n    return setTimeout(fn, 35);\n  };\n};\nvar now = function now(fn) {\n  return function () {\n    return fn();\n  };\n};\nvar findInitialSelectionIndex = function findInitialSelectionIndex(computedProps) {\n  var selected = computedProps.getSelectedMap();\n  var index = null;\n  if (!selected || !Object.keys(selected).length) {\n    return index;\n  }\n  var i = 0;\n  var data = computedProps.data;\n  var len = data.length;\n  var id;\n  for (; i < len; i++) {\n    id = computedProps.getItemId(data[i]);\n    if (selected[id]) {\n      index = i;\n    }\n  }\n  return index;\n};\nexports.findInitialSelectionIndex = findInitialSelectionIndex;\nvar notifySelection = function notifySelection(computedProps, selected, data, unselected, queue) {\n  var queueDefined = !!queue;\n  queue = queue || (0, _batchUpdate.default)();\n  var onSelectionChange = (isSafari ? delay35 : now)(function () {\n    if (typeof computedProps.onSelectionChange == 'function') {\n      computedProps.onSelectionChange({\n        selected: selected,\n        data: data,\n        unselected: unselected,\n        originalData: (computedProps === null || computedProps === void 0 ? void 0 : computedProps.originalData) || null\n      });\n    }\n  });\n  if (!(0, _isControlledProperty.default)(computedProps.initialProps, 'unselected')) {\n    queue(function () {\n      computedProps.setUnselected(unselected);\n    });\n  }\n  if (!(0, _isControlledProperty.default)(computedProps.initialProps, 'selected')) {\n    queue(function () {\n      computedProps.setSelected(selected, {\n        silent: true\n      });\n    });\n  }\n  onSelectionChange();\n  if (!queueDefined) {\n    queue.commit();\n  }\n};\nexports.notifySelection = notifySelection;\nvar handleSingleSelection = function handleSingleSelection(rowProps, computedProps, event, queue) {\n  var data = rowProps.data;\n  var rowSelected = computedProps.isRowSelected(data);\n  var newSelected = !rowSelected;\n  var ctrlKey = event.metaKey || event.ctrlKey;\n  if (!computedProps.toggleRowSelectOnClick && rowSelected && event && !ctrlKey) {\n    newSelected = true;\n  }\n  var selectedId = newSelected ? computedProps.getItemId(data) : null;\n  notifySelection(computedProps, selectedId, data, null, queue);\n};\nexports.handleSingleSelection = handleSingleSelection;\nvar handleMultiSelection = function handleMultiSelection(computedProps, data, config, queue) {\n  var selIndex = config.selIndex;\n  var prevShiftKeyIndex = config.prevShiftKeyIndex;\n  var map = selIndex == null ? {} : Object.assign({}, computedProps.computedSelected);\n  if (prevShiftKeyIndex != null && selIndex != null) {\n    var min = Math.min(prevShiftKeyIndex, selIndex);\n    var max = Math.max(prevShiftKeyIndex, selIndex);\n    var removeArray = computedProps.data.slice(min, max + 1) || [];\n    removeArray.forEach(function (item) {\n      if (item) {\n        var id = computedProps.getItemId(item);\n        delete map[id];\n      }\n    });\n  }\n  data.forEach(function (item) {\n    if (item) {\n      var id = computedProps.getItemId(item);\n      map[id] = item;\n    }\n  });\n  notifySelection(computedProps, map, data, null, queue);\n};\nexports.handleMultiSelection = handleMultiSelection;\nvar handleMultiSelectionRowToggle = function handleMultiSelectionRowToggle(computedProps, data, queue) {\n  var selected = computedProps.computedSelected;\n  var isSelected = computedProps.isRowSelected(data);\n  if (selected !== true) {\n    var clone = Object.assign({}, selected);\n    var id = computedProps.getItemId(data);\n    if (isSelected) {\n      delete clone[id];\n    } else {\n      clone[id] = data;\n    }\n    notifySelection(computedProps, clone, data, null, queue);\n  } else {\n    var _id = computedProps.getItemId(data);\n    var unselected = Object.assign({}, computedProps.computedUnselected);\n    if (isSelected) {\n      unselected[_id] = data;\n    } else {\n      delete unselected[_id];\n    }\n    notifySelection(computedProps, true, data, unselected, queue);\n  }\n  return isSelected;\n};\nexports.handleMultiSelectionRowToggle = handleMultiSelectionRowToggle;\nvar handleSelection = function handleSelection(rowProps, computedProps, event, queue) {\n  var queueDefined = !!queue;\n  if (!queue) {\n    queue = (0, _batchUpdate.default)();\n  }\n  if (!computedProps.computedRowSelectionEnabled) {\n    return;\n  }\n  if (!computedProps.computedRowMultiSelectionEnabled) {\n    handleSingleSelection(rowProps, computedProps, event, queue);\n    if (!queueDefined) {\n      queue.commit();\n    }\n    return;\n  }\n  var selIndex = computedProps.selectionIndexRef.current;\n  if (selIndex === null) {\n    selIndex = findInitialSelectionIndex(computedProps);\n  }\n  var index = rowProps.rowIndex;\n  var prevShiftKeyIndex = computedProps.shiftKeyIndexRef.current;\n  var start;\n  var end;\n  var data;\n  if (event.metaKey || event.ctrlKey || computedProps.toggleRowSelectOnClick && computedProps.getSelectedCount() === 1 && computedProps.isRowSelected(computedProps.data[index])) {\n    computedProps.selectionIndexRef.current = index;\n    computedProps.shiftKeyIndexRef.current = null;\n    var unselect = handleMultiSelectionRowToggle(computedProps, computedProps.data[index], queue);\n    if (!queueDefined) {\n      queue.commit();\n    }\n    if (unselect) {\n      computedProps.selectionIndexRef.current++;\n      computedProps.shiftKeyIndexRef.current = prevShiftKeyIndex;\n      return false;\n    }\n    return;\n  }\n  if (!event.shiftKey) {\n    computedProps.selectionIndexRef.current = index;\n    computedProps.shiftKeyIndexRef.current = null;\n    selIndex = null;\n  } else {\n    computedProps.shiftKeyIndexRef.current = index;\n  }\n  if (selIndex == null) {\n    data = [computedProps.data[index]];\n  } else {\n    start = Math.min(index, selIndex);\n    end = Math.max(index, selIndex) + 1;\n    data = computedProps.data.slice(start, end);\n  }\n  handleMultiSelection(computedProps, data, {\n    selIndex: selIndex,\n    prevShiftKeyIndex: prevShiftKeyIndex\n  }, queue);\n  if (!queueDefined) {\n    queue.commit();\n  }\n};\nexports.handleSelection = handleSelection;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","notifySelection","handleSingleSelection","handleSelection","handleMultiSelectionRowToggle","handleMultiSelection","findInitialSelectionIndex","_isControlledProperty","_batchUpdate","_getGlobal","globalObject","getGlobal","ua","navigator","userAgent","isSafari","indexOf","delay35","fn","setTimeout","now","computedProps","selected","getSelectedMap","index","keys","length","i","data","len","id","getItemId","unselected","queue","queueDefined","default","onSelectionChange","originalData","initialProps","setUnselected","setSelected","silent","commit","rowProps","event","rowSelected","isRowSelected","newSelected","ctrlKey","metaKey","toggleRowSelectOnClick","selectedId","config","selIndex","prevShiftKeyIndex","map","assign","computedSelected","min","Math","max","removeArray","slice","forEach","item","isSelected","clone","_id","computedUnselected","computedRowSelectionEnabled","computedRowMultiSelectionEnabled","selectionIndexRef","current","rowIndex","shiftKeyIndexRef","start","end","getSelectedCount","unselect","shiftKey"],"sources":["/Users/alexandre.nepomuceno/Documents/agenda/node_modules/@inovua/reactdatagrid-community/hooks/useRow/handleSelection.js"],"sourcesContent":["/** \n * Copyright © INOVUA TRADING.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.notifySelection = exports.handleSingleSelection = exports.handleSelection = exports.handleMultiSelectionRowToggle = exports.handleMultiSelection = exports.findInitialSelectionIndex = void 0;\nvar _isControlledProperty = _interopRequireDefault(require(\"../../utils/isControlledProperty\"));\nvar _batchUpdate = _interopRequireDefault(require(\"../../utils/batchUpdate\"));\nvar _getGlobal = require(\"../../getGlobal\");\nvar globalObject = (0, _getGlobal.getGlobal)();\nvar ua = globalObject.navigator ? globalObject.navigator.userAgent : '';\nvar isSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\nvar delay35 = function delay35(fn) {\n  return function () {\n    return setTimeout(fn, 35);\n  };\n};\nvar now = function now(fn) {\n  return function () {\n    return fn();\n  };\n};\nvar findInitialSelectionIndex = function findInitialSelectionIndex(computedProps) {\n  var selected = computedProps.getSelectedMap();\n  var index = null;\n  if (!selected || !Object.keys(selected).length) {\n    return index;\n  }\n  var i = 0;\n  var data = computedProps.data;\n  var len = data.length;\n  var id;\n  for (; i < len; i++) {\n    id = computedProps.getItemId(data[i]);\n    if (selected[id]) {\n      index = i;\n    }\n  }\n  return index;\n};\nexports.findInitialSelectionIndex = findInitialSelectionIndex;\nvar notifySelection = function notifySelection(computedProps, selected, data, unselected, queue) {\n  var queueDefined = !!queue;\n  queue = queue || (0, _batchUpdate.default)();\n  var onSelectionChange = (isSafari ? delay35 : now)(function () {\n    if (typeof computedProps.onSelectionChange == 'function') {\n      computedProps.onSelectionChange({\n        selected: selected,\n        data: data,\n        unselected: unselected,\n        originalData: (computedProps === null || computedProps === void 0 ? void 0 : computedProps.originalData) || null\n      });\n    }\n  });\n  if (!(0, _isControlledProperty.default)(computedProps.initialProps, 'unselected')) {\n    queue(function () {\n      computedProps.setUnselected(unselected);\n    });\n  }\n  if (!(0, _isControlledProperty.default)(computedProps.initialProps, 'selected')) {\n    queue(function () {\n      computedProps.setSelected(selected, {\n        silent: true\n      });\n    });\n  }\n  onSelectionChange();\n  if (!queueDefined) {\n    queue.commit();\n  }\n};\nexports.notifySelection = notifySelection;\nvar handleSingleSelection = function handleSingleSelection(rowProps, computedProps, event, queue) {\n  var data = rowProps.data;\n  var rowSelected = computedProps.isRowSelected(data);\n  var newSelected = !rowSelected;\n  var ctrlKey = event.metaKey || event.ctrlKey;\n  if (!computedProps.toggleRowSelectOnClick && rowSelected && event && !ctrlKey) {\n    newSelected = true;\n  }\n  var selectedId = newSelected ? computedProps.getItemId(data) : null;\n  notifySelection(computedProps, selectedId, data, null, queue);\n};\nexports.handleSingleSelection = handleSingleSelection;\nvar handleMultiSelection = function handleMultiSelection(computedProps, data, config, queue) {\n  var selIndex = config.selIndex;\n  var prevShiftKeyIndex = config.prevShiftKeyIndex;\n  var map = selIndex == null ? {} : Object.assign({}, computedProps.computedSelected);\n  if (prevShiftKeyIndex != null && selIndex != null) {\n    var min = Math.min(prevShiftKeyIndex, selIndex);\n    var max = Math.max(prevShiftKeyIndex, selIndex);\n    var removeArray = computedProps.data.slice(min, max + 1) || [];\n    removeArray.forEach(function (item) {\n      if (item) {\n        var id = computedProps.getItemId(item);\n        delete map[id];\n      }\n    });\n  }\n  data.forEach(function (item) {\n    if (item) {\n      var id = computedProps.getItemId(item);\n      map[id] = item;\n    }\n  });\n  notifySelection(computedProps, map, data, null, queue);\n};\nexports.handleMultiSelection = handleMultiSelection;\nvar handleMultiSelectionRowToggle = function handleMultiSelectionRowToggle(computedProps, data, queue) {\n  var selected = computedProps.computedSelected;\n  var isSelected = computedProps.isRowSelected(data);\n  if (selected !== true) {\n    var clone = Object.assign({}, selected);\n    var id = computedProps.getItemId(data);\n    if (isSelected) {\n      delete clone[id];\n    } else {\n      clone[id] = data;\n    }\n    notifySelection(computedProps, clone, data, null, queue);\n  } else {\n    var _id = computedProps.getItemId(data);\n    var unselected = Object.assign({}, computedProps.computedUnselected);\n    if (isSelected) {\n      unselected[_id] = data;\n    } else {\n      delete unselected[_id];\n    }\n    notifySelection(computedProps, true, data, unselected, queue);\n  }\n  return isSelected;\n};\nexports.handleMultiSelectionRowToggle = handleMultiSelectionRowToggle;\nvar handleSelection = function handleSelection(rowProps, computedProps, event, queue) {\n  var queueDefined = !!queue;\n  if (!queue) {\n    queue = (0, _batchUpdate.default)();\n  }\n  if (!computedProps.computedRowSelectionEnabled) {\n    return;\n  }\n  if (!computedProps.computedRowMultiSelectionEnabled) {\n    handleSingleSelection(rowProps, computedProps, event, queue);\n    if (!queueDefined) {\n      queue.commit();\n    }\n    return;\n  }\n  var selIndex = computedProps.selectionIndexRef.current;\n  if (selIndex === null) {\n    selIndex = findInitialSelectionIndex(computedProps);\n  }\n  var index = rowProps.rowIndex;\n  var prevShiftKeyIndex = computedProps.shiftKeyIndexRef.current;\n  var start;\n  var end;\n  var data;\n  if (event.metaKey || event.ctrlKey || computedProps.toggleRowSelectOnClick && computedProps.getSelectedCount() === 1 && computedProps.isRowSelected(computedProps.data[index])) {\n    computedProps.selectionIndexRef.current = index;\n    computedProps.shiftKeyIndexRef.current = null;\n    var unselect = handleMultiSelectionRowToggle(computedProps, computedProps.data[index], queue);\n    if (!queueDefined) {\n      queue.commit();\n    }\n    if (unselect) {\n      computedProps.selectionIndexRef.current++;\n      computedProps.shiftKeyIndexRef.current = prevShiftKeyIndex;\n      return false;\n    }\n    return;\n  }\n  if (!event.shiftKey) {\n    computedProps.selectionIndexRef.current = index;\n    computedProps.shiftKeyIndexRef.current = null;\n    selIndex = null;\n  } else {\n    computedProps.shiftKeyIndexRef.current = index;\n  }\n  if (selIndex == null) {\n    data = [computedProps.data[index]];\n  } else {\n    start = Math.min(index, selIndex);\n    end = Math.max(index, selIndex) + 1;\n    data = computedProps.data.slice(start, end);\n  }\n  handleMultiSelection(computedProps, data, {\n    selIndex: selIndex,\n    prevShiftKeyIndex: prevShiftKeyIndex\n  }, queue);\n  if (!queueDefined) {\n    queue.commit();\n  }\n};\nexports.handleSelection = handleSelection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}